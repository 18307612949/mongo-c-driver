<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MongoDBCDriver: bson.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>bson.h</h1>  </div>
</div>
<div class="contents">
<a href="bson_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00006"></a>00006 <span class="comment">/*    Copyright 2009-2011 10gen Inc.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00009"></a>00009 <span class="comment"> *    you may not use this file except in compliance with the License.</span>
<a name="l00010"></a>00010 <span class="comment"> *    You may obtain a copy of the License at</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *    http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> *    Unless required by applicable law or agreed to in writing, software</span>
<a name="l00015"></a>00015 <span class="comment"> *    distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00016"></a>00016 <span class="comment"> *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00017"></a>00017 <span class="comment"> *    See the License for the specific language governing permissions and</span>
<a name="l00018"></a>00018 <span class="comment"> *    limitations under the License.</span>
<a name="l00019"></a>00019 <span class="comment"> */</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#ifndef _BSON_H_</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define _BSON_H_</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="platform_8h.html">platform.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;time.h&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 MONGO_EXTERN_C_START
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#define BSON_OK 0</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define BSON_ERROR -1</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00036"></a><a class="code" href="bson_8h.html#ac0022026c717c8e214dd119955b4e662">00036</a> <span class="keyword">enum</span> <a class="code" href="bson_8h.html#ac0022026c717c8e214dd119955b4e662">bson_error_t</a> {
<a name="l00037"></a><a class="code" href="bson_8h.html#ac0022026c717c8e214dd119955b4e662a73a6529cc9b7dbf482eb116780bec87b">00037</a>     <a class="code" href="bson_8h.html#ac0022026c717c8e214dd119955b4e662a73a6529cc9b7dbf482eb116780bec87b" title="Trying to create a BSON object larger than INT_MAX.">BSON_SIZE_OVERFLOW</a> = 1 
<a name="l00038"></a>00038 };
<a name="l00039"></a>00039 
<a name="l00040"></a><a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3a">00040</a> <span class="keyword">enum</span> <a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3a">bson_validity_t</a> {
<a name="l00041"></a><a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aad2a627420132bdc19105d04dd2bfc179">00041</a>     <a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aad2a627420132bdc19105d04dd2bfc179" title="BSON is valid and UTF-8 compliant.">BSON_VALID</a> = 0,                 
<a name="l00042"></a><a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aa8402d6292eddd17aac37e251fd41b644">00042</a>     <a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aa8402d6292eddd17aac37e251fd41b644" title="A key or a string is not valid UTF-8.">BSON_NOT_UTF8</a> = ( 1&lt;&lt;1 ),       
<a name="l00043"></a><a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aa4caf779046862ea23dd771d8af8918f1">00043</a>     <a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aa4caf779046862ea23dd771d8af8918f1" title="Warning: key contains &amp;#39;.">BSON_FIELD_HAS_DOT</a> = ( 1&lt;&lt;2 ),  
<a name="l00044"></a><a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aa8cd94ba3ad97927cd32fd1ee9833d95a">00044</a>     <a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aa8cd94ba3ad97927cd32fd1ee9833d95a" title="Warning: key starts with &amp;#39;$&amp;#39; character.">BSON_FIELD_INIT_DOLLAR</a> = ( 1&lt;&lt;3 ), 
<a name="l00045"></a><a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aa562e555cfa18a7ade9747981c69eac27">00045</a>     <a class="code" href="bson_8h.html#a4b9bcba51128a5736912d46966d35e3aa562e555cfa18a7ade9747981c69eac27" title="Trying to modify a finished BSON object.">BSON_ALREADY_FINISHED</a> = ( 1&lt;&lt;4 )  
<a name="l00046"></a>00046 };
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="keyword">enum</span> bson_binary_subtype_t {
<a name="l00049"></a>00049     BSON_BIN_BINARY = 0,
<a name="l00050"></a>00050     BSON_BIN_FUNC = 1,
<a name="l00051"></a>00051     BSON_BIN_BINARY_OLD = 2,
<a name="l00052"></a>00052     BSON_BIN_UUID = 3,
<a name="l00053"></a>00053     BSON_BIN_MD5 = 5,
<a name="l00054"></a>00054     BSON_BIN_USER = 128
<a name="l00055"></a>00055 };
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="bson_8h.html#adac27a93ef69dbe56a6409c68395e5cb">00057</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00058"></a>00058     BSON_EOO = 0,
<a name="l00059"></a>00059     BSON_DOUBLE = 1,
<a name="l00060"></a>00060     BSON_STRING = 2,
<a name="l00061"></a>00061     BSON_OBJECT = 3,
<a name="l00062"></a>00062     BSON_ARRAY = 4,
<a name="l00063"></a>00063     BSON_BINDATA = 5,
<a name="l00064"></a>00064     BSON_UNDEFINED = 6,
<a name="l00065"></a>00065     BSON_OID = 7,
<a name="l00066"></a>00066     BSON_BOOL = 8,
<a name="l00067"></a>00067     BSON_DATE = 9,
<a name="l00068"></a>00068     BSON_NULL = 10,
<a name="l00069"></a>00069     BSON_REGEX = 11,
<a name="l00070"></a><a class="code" href="bson_8h.html#adac27a93ef69dbe56a6409c68395e5cbac1530f7ab5d63d762b893939f4b7a674">00070</a>     <a class="code" href="bson_8h.html#adac27a93ef69dbe56a6409c68395e5cbac1530f7ab5d63d762b893939f4b7a674" title="Deprecated.">BSON_DBREF</a> = 12, 
<a name="l00071"></a>00071     BSON_CODE = 13,
<a name="l00072"></a>00072     BSON_SYMBOL = 14,
<a name="l00073"></a>00073     BSON_CODEWSCOPE = 15,
<a name="l00074"></a>00074     BSON_INT = 16,
<a name="l00075"></a>00075     BSON_TIMESTAMP = 17,
<a name="l00076"></a>00076     BSON_LONG = 18
<a name="l00077"></a>00077 } bson_type;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="keyword">typedef</span> <span class="keywordtype">int</span> bson_bool_t;
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="structbson__iterator.html">00081</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00082"></a>00082     <span class="keyword">const</span> <span class="keywordtype">char</span> *cur;
<a name="l00083"></a>00083     bson_bool_t first;
<a name="l00084"></a>00084 } <a class="code" href="structbson__iterator.html">bson_iterator</a>;
<a name="l00085"></a>00085 
<a name="l00086"></a><a class="code" href="structbson.html">00086</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00087"></a>00087     <span class="keywordtype">char</span> *data;
<a name="l00088"></a>00088     <span class="keywordtype">char</span> *cur;
<a name="l00089"></a>00089     <span class="keywordtype">int</span> dataSize;
<a name="l00090"></a>00090     bson_bool_t finished;
<a name="l00091"></a>00091     <span class="keywordtype">int</span> stack[32];
<a name="l00092"></a>00092     <span class="keywordtype">int</span> stackPos;
<a name="l00093"></a><a class="code" href="structbson.html#abf3edf88c788018d4dbdebac9f9ab925">00093</a>     <span class="keywordtype">int</span> err; 
<a name="l00094"></a><a class="code" href="structbson.html#a419449410c496c8a66111e40c715771d">00094</a>     <span class="keywordtype">char</span> *errstr; 
<a name="l00095"></a>00095 } <a class="code" href="structbson.html">bson</a>;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="preprocessor">#pragma pack(1)</span>
<a name="l00098"></a><a class="code" href="unionbson__oid__t.html">00098</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00099"></a>00099     <span class="keywordtype">char</span> bytes[12];
<a name="l00100"></a>00100     <span class="keywordtype">int</span> ints[3];
<a name="l00101"></a>00101 } <a class="code" href="unionbson__oid__t.html">bson_oid_t</a>;
<a name="l00102"></a>00102 <span class="preprocessor">#pragma pack()</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00104"></a>00104 <span class="keyword">typedef</span> int64_t bson_date_t; <span class="comment">/* milliseconds since epoch UTC */</span>
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="structbson__timestamp__t.html">00106</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00107"></a>00107     <span class="keywordtype">int</span> i; <span class="comment">/* increment */</span>
<a name="l00108"></a>00108     <span class="keywordtype">int</span> t; <span class="comment">/* time in seconds */</span>
<a name="l00109"></a>00109 } <a class="code" href="structbson__timestamp__t.html">bson_timestamp_t</a>;
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">/* ----------------------------</span>
<a name="l00112"></a>00112 <span class="comment">   READING</span>
<a name="l00113"></a>00113 <span class="comment">   ------------------------------ */</span>
<a name="l00114"></a>00114 
<a name="l00122"></a>00122 <span class="keywordtype">int</span> bson_size( <span class="keyword">const</span> <a class="code" href="structbson.html">bson</a> *b );
<a name="l00123"></a>00123 
<a name="l00129"></a>00129 <span class="keywordtype">void</span> bson_print( <a class="code" href="structbson.html">bson</a> *b );
<a name="l00130"></a>00130 
<a name="l00136"></a>00136 <span class="keyword">const</span> <span class="keywordtype">char</span> *bson_data( <a class="code" href="structbson.html">bson</a> *b );
<a name="l00137"></a>00137 
<a name="l00144"></a>00144 <span class="keywordtype">void</span> bson_print_raw( <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structbson.html">bson</a> , <span class="keywordtype">int</span> depth );
<a name="l00145"></a>00145 
<a name="l00155"></a>00155 <a class="code" href="bson_8h.html#adac27a93ef69dbe56a6409c68395e5cb">bson_type</a> bson_find( <a class="code" href="structbson__iterator.html">bson_iterator</a> *it, <span class="keyword">const</span> <a class="code" href="structbson.html">bson</a> *obj, <span class="keyword">const</span> <span class="keywordtype">char</span> *name );
<a name="l00156"></a>00156 
<a name="l00163"></a>00163 <span class="keywordtype">void</span> bson_iterator_init( <a class="code" href="structbson__iterator.html">bson_iterator</a> *i , <span class="keyword">const</span> <a class="code" href="structbson.html">bson</a> *b );
<a name="l00164"></a>00164 
<a name="l00172"></a>00172 <span class="keywordtype">void</span> bson_iterator_from_buffer( <a class="code" href="structbson__iterator.html">bson_iterator</a> *i, <span class="keyword">const</span> <span class="keywordtype">char</span> *buffer );
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 <span class="comment">/* more returns true for eoo. best to loop with bson_iterator_next(&amp;it) */</span>
<a name="l00182"></a>00182 bson_bool_t bson_iterator_more( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00183"></a>00183 
<a name="l00191"></a>00191 <a class="code" href="bson_8h.html#adac27a93ef69dbe56a6409c68395e5cb">bson_type</a> bson_iterator_next( <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00192"></a>00192 
<a name="l00200"></a>00200 <a class="code" href="bson_8h.html#adac27a93ef69dbe56a6409c68395e5cb">bson_type</a> bson_iterator_type( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00201"></a>00201 
<a name="l00209"></a>00209 <span class="keyword">const</span> <span class="keywordtype">char</span> *bson_iterator_key( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00210"></a>00210 
<a name="l00218"></a>00218 <span class="keyword">const</span> <span class="keywordtype">char</span> *bson_iterator_value( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 <span class="comment">/* these convert to the right type (return 0 if non-numeric) */</span>
<a name="l00229"></a>00229 <span class="keywordtype">double</span> bson_iterator_double( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00230"></a>00230 
<a name="l00238"></a>00238 <span class="keywordtype">int</span> bson_iterator_int( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00239"></a>00239 
<a name="l00247"></a>00247 int64_t bson_iterator_long( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 <span class="comment">/* return the bson timestamp as a whole or in parts */</span>
<a name="l00258"></a>00258 <a class="code" href="structbson__timestamp__t.html">bson_timestamp_t</a> bson_iterator_timestamp( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00259"></a>00259 
<a name="l00268"></a>00268 <span class="comment">/* false: boolean false, 0 in any type, or null */</span>
<a name="l00269"></a>00269 <span class="comment">/* true: anything else (even empty strings and objects) */</span>
<a name="l00270"></a>00270 bson_bool_t bson_iterator_bool( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00271"></a>00271 
<a name="l00280"></a>00280 <span class="comment">/* these assume you are using the right type */</span>
<a name="l00281"></a>00281 <span class="keywordtype">double</span> bson_iterator_double_raw( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00282"></a>00282 
<a name="l00291"></a>00291 <span class="keywordtype">int</span> bson_iterator_int_raw( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00292"></a>00292 
<a name="l00301"></a>00301 int64_t bson_iterator_long_raw( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00302"></a>00302 
<a name="l00311"></a>00311 bson_bool_t bson_iterator_bool_raw( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00312"></a>00312 
<a name="l00321"></a>00321 <a class="code" href="unionbson__oid__t.html">bson_oid_t</a> *bson_iterator_oid( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00322"></a>00322 
<a name="l00331"></a>00331 <span class="comment">/* these can also be used with bson_code and bson_symbol*/</span>
<a name="l00332"></a>00332 <span class="keyword">const</span> <span class="keywordtype">char</span> *bson_iterator_string( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00333"></a>00333 
<a name="l00342"></a>00342 <span class="keywordtype">int</span> bson_iterator_string_len( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00343"></a>00343 
<a name="l00353"></a>00353 <span class="comment">/* works with bson_code, bson_codewscope, and BSON_STRING */</span>
<a name="l00354"></a>00354 <span class="comment">/* returns NULL for everything else */</span>
<a name="l00355"></a>00355 <span class="keyword">const</span> <span class="keywordtype">char</span> *bson_iterator_code( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00356"></a>00356 
<a name="l00363"></a>00363 <span class="comment">/* calls bson_empty on scope if not a bson_codewscope */</span>
<a name="l00364"></a>00364 <span class="keywordtype">void</span> bson_iterator_code_scope( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i, <a class="code" href="structbson.html">bson</a> *scope );
<a name="l00365"></a>00365 
<a name="l00374"></a>00374 <span class="comment">/* both of these only work with bson_date */</span>
<a name="l00375"></a>00375 bson_date_t bson_iterator_date( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00376"></a>00376 
<a name="l00385"></a>00385 time_t bson_iterator_time_t( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00386"></a>00386 
<a name="l00395"></a>00395 <span class="keywordtype">int</span> bson_iterator_bin_len( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00396"></a>00396 
<a name="l00405"></a>00405 <span class="keywordtype">char</span> bson_iterator_bin_type( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00406"></a>00406 
<a name="l00415"></a>00415 <span class="keyword">const</span> <span class="keywordtype">char</span> *bson_iterator_bin_data( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00416"></a>00416 
<a name="l00425"></a>00425 <span class="keyword">const</span> <span class="keywordtype">char</span> *bson_iterator_regex( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00426"></a>00426 
<a name="l00435"></a>00435 <span class="keyword">const</span> <span class="keywordtype">char</span> *bson_iterator_regex_opts( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i );
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="comment">/* these work with BSON_OBJECT and BSON_ARRAY */</span>
<a name="l00445"></a>00445 <span class="keywordtype">void</span> bson_iterator_subobject( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i, <a class="code" href="structbson.html">bson</a> *sub );
<a name="l00446"></a>00446 
<a name="l00453"></a>00453 <span class="keywordtype">void</span> bson_iterator_subiterator( <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *i, <a class="code" href="structbson__iterator.html">bson_iterator</a> *sub );
<a name="l00454"></a>00454 
<a name="l00455"></a>00455 <span class="comment">/* str must be at least 24 hex chars + null byte */</span>
<a name="l00462"></a>00462 <span class="keywordtype">void</span> bson_oid_from_string( <a class="code" href="unionbson__oid__t.html">bson_oid_t</a> *oid, <span class="keyword">const</span> <span class="keywordtype">char</span> *str );
<a name="l00463"></a>00463 
<a name="l00470"></a>00470 <span class="keywordtype">void</span> bson_oid_to_string( <span class="keyword">const</span> <a class="code" href="unionbson__oid__t.html">bson_oid_t</a> *oid, <span class="keywordtype">char</span> *str );
<a name="l00471"></a>00471 
<a name="l00477"></a>00477 <span class="keywordtype">void</span> bson_oid_gen( <a class="code" href="unionbson__oid__t.html">bson_oid_t</a> *oid );
<a name="l00478"></a>00478 
<a name="l00485"></a>00485 <span class="keywordtype">void</span> bson_set_oid_fuzz( <span class="keywordtype">int</span> ( *func )( <span class="keywordtype">void</span> ) );
<a name="l00486"></a>00486 
<a name="l00494"></a>00494 <span class="keywordtype">void</span> bson_set_oid_inc( <span class="keywordtype">int</span> ( *func )( <span class="keywordtype">void</span> ) );
<a name="l00495"></a>00495 
<a name="l00501"></a>00501 time_t bson_oid_generated_time( <a class="code" href="unionbson__oid__t.html">bson_oid_t</a> *oid ); <span class="comment">/* Gives the time the OID was created */</span>
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 <span class="comment">/* ----------------------------</span>
<a name="l00504"></a>00504 <span class="comment">   BUILDING</span>
<a name="l00505"></a>00505 <span class="comment">   ------------------------------ */</span>
<a name="l00506"></a>00506 
<a name="l00515"></a>00515 <span class="keywordtype">void</span> bson_init( <a class="code" href="structbson.html">bson</a> *b );
<a name="l00516"></a>00516 
<a name="l00526"></a>00526 <span class="keywordtype">int</span> bson_init_data( <a class="code" href="structbson.html">bson</a> *b , <span class="keywordtype">char</span> *data );
<a name="l00527"></a>00527 
<a name="l00537"></a>00537 <span class="keywordtype">void</span> bson_init_size( <a class="code" href="structbson.html">bson</a> *b, <span class="keywordtype">int</span> size );
<a name="l00538"></a>00538 
<a name="l00548"></a>00548 <span class="keywordtype">int</span> bson_ensure_space( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">int</span> bytesNeeded );
<a name="l00549"></a>00549 
<a name="l00558"></a>00558 <span class="keywordtype">int</span> bson_finish( <a class="code" href="structbson.html">bson</a> *b );
<a name="l00559"></a>00559 
<a name="l00566"></a>00566 <span class="keywordtype">void</span> bson_destroy( <a class="code" href="structbson.html">bson</a> *b );
<a name="l00567"></a>00567 
<a name="l00575"></a>00575 <span class="comment">/* returns pointer to static empty bson object */</span>
<a name="l00576"></a>00576 <a class="code" href="structbson.html">bson</a> *bson_empty( <a class="code" href="structbson.html">bson</a> *obj );
<a name="l00577"></a>00577 
<a name="l00584"></a>00584 <span class="keywordtype">void</span> bson_copy_basic( <a class="code" href="structbson.html">bson</a> *out, <span class="keyword">const</span> <a class="code" href="structbson.html">bson</a> *in );
<a name="l00585"></a>00585 
<a name="l00592"></a>00592 <span class="keywordtype">void</span> bson_copy( <a class="code" href="structbson.html">bson</a> *out, <span class="keyword">const</span> <a class="code" href="structbson.html">bson</a> *in ); <span class="comment">/* puts data in new buffer. NOOP if out==NULL */</span>
<a name="l00593"></a>00593 
<a name="l00603"></a>00603 <span class="keywordtype">int</span> bson_append_oid( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <a class="code" href="unionbson__oid__t.html">bson_oid_t</a> *oid );
<a name="l00604"></a>00604 
<a name="l00613"></a>00613 <span class="keywordtype">int</span> bson_append_new_oid( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name );
<a name="l00614"></a>00614 
<a name="l00624"></a>00624 <span class="keywordtype">int</span> bson_append_int( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">int</span> i );
<a name="l00625"></a>00625 
<a name="l00635"></a>00635 <span class="keywordtype">int</span> bson_append_long( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> int64_t i );
<a name="l00636"></a>00636 
<a name="l00646"></a>00646 <span class="keywordtype">int</span> bson_append_double( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">double</span> d );
<a name="l00647"></a>00647 
<a name="l00657"></a>00657 <span class="keywordtype">int</span> bson_append_string( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *str );
<a name="l00658"></a>00658 
<a name="l00669"></a>00669 <span class="keywordtype">int</span> bson_append_string_n( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> len );
<a name="l00670"></a>00670 
<a name="l00680"></a>00680 <span class="keywordtype">int</span> bson_append_symbol( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *str );
<a name="l00681"></a>00681 
<a name="l00692"></a>00692 <span class="keywordtype">int</span> bson_append_symbol_n( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> len );
<a name="l00693"></a>00693 
<a name="l00704"></a>00704 <span class="keywordtype">int</span> bson_append_code( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *str );
<a name="l00705"></a>00705 
<a name="l00716"></a>00716 <span class="keywordtype">int</span> bson_append_code_n( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> len );
<a name="l00717"></a>00717 
<a name="l00728"></a>00728 <span class="keywordtype">int</span> bson_append_code_w_scope( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *code, <span class="keyword">const</span> <a class="code" href="structbson.html">bson</a> *scope );
<a name="l00729"></a>00729 
<a name="l00741"></a>00741 <span class="keywordtype">int</span> bson_append_code_w_scope_n( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *code, <span class="keywordtype">int</span> size, <span class="keyword">const</span> <a class="code" href="structbson.html">bson</a> *scope );
<a name="l00742"></a>00742 
<a name="l00754"></a>00754 <span class="keywordtype">int</span> bson_append_binary( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">char</span> type, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> len );
<a name="l00755"></a>00755 
<a name="l00765"></a>00765 <span class="keywordtype">int</span> bson_append_bool( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> bson_bool_t v );
<a name="l00766"></a>00766 
<a name="l00775"></a>00775 <span class="keywordtype">int</span> bson_append_null( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name );
<a name="l00776"></a>00776 
<a name="l00785"></a>00785 <span class="keywordtype">int</span> bson_append_undefined( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name );
<a name="l00786"></a>00786 
<a name="l00797"></a>00797 <span class="keywordtype">int</span> bson_append_regex( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *pattern, <span class="keyword">const</span> <span class="keywordtype">char</span> *opts );
<a name="l00798"></a>00798 
<a name="l00808"></a>00808 <span class="keywordtype">int</span> bson_append_bson( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <a class="code" href="structbson.html">bson</a> *<a class="code" href="structbson.html">bson</a> );
<a name="l00809"></a>00809 
<a name="l00819"></a>00819 <span class="keywordtype">int</span> bson_append_element( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name_or_null, <span class="keyword">const</span> <a class="code" href="structbson__iterator.html">bson_iterator</a> *elem );
<a name="l00820"></a>00820 
<a name="l00830"></a>00830 <span class="keywordtype">int</span> bson_append_timestamp( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="structbson__timestamp__t.html">bson_timestamp_t</a> *ts );
<a name="l00831"></a>00831 
<a name="l00832"></a>00832 <span class="comment">/* these both append a bson_date */</span>
<a name="l00842"></a>00842 <span class="keywordtype">int</span> bson_append_date( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, bson_date_t millis );
<a name="l00843"></a>00843 
<a name="l00853"></a>00853 <span class="keywordtype">int</span> bson_append_time_t( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, time_t secs );
<a name="l00854"></a>00854 
<a name="l00863"></a>00863 <span class="keywordtype">int</span> bson_append_start_object( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name );
<a name="l00864"></a>00864 
<a name="l00873"></a>00873 <span class="keywordtype">int</span> bson_append_start_array( <a class="code" href="structbson.html">bson</a> *b, <span class="keyword">const</span> <span class="keywordtype">char</span> *name );
<a name="l00874"></a>00874 
<a name="l00882"></a>00882 <span class="keywordtype">int</span> bson_append_finish_object( <a class="code" href="structbson.html">bson</a> *b );
<a name="l00883"></a>00883 
<a name="l00892"></a>00892 <span class="keywordtype">int</span> bson_append_finish_array( <a class="code" href="structbson.html">bson</a> *b );
<a name="l00893"></a>00893 
<a name="l00894"></a>00894 <span class="keywordtype">void</span> bson_numstr( <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> i );
<a name="l00895"></a>00895 
<a name="l00896"></a>00896 <span class="keywordtype">void</span> bson_incnumstr( <span class="keywordtype">char</span> *str );
<a name="l00897"></a>00897 
<a name="l00898"></a>00898 <span class="comment">/* Error handling and stadard library function over-riding. */</span>
<a name="l00899"></a>00899 <span class="comment">/* -------------------------------------------------------- */</span>
<a name="l00900"></a>00900 
<a name="l00901"></a>00901 <span class="comment">/* bson_err_handlers shouldn&#39;t return!!! */</span>
<a name="l00902"></a>00902 <span class="keyword">typedef</span> void( *bson_err_handler )( <span class="keyword">const</span> <span class="keywordtype">char</span> *errmsg );
<a name="l00903"></a>00903 
<a name="l00904"></a>00904 <span class="keyword">typedef</span> int (*bson_printf_func)( <span class="keyword">const</span> <span class="keywordtype">char</span> *, ... );
<a name="l00905"></a>00905 <span class="keyword">typedef</span> int (*bson_fprintf_func)( FILE *, <span class="keyword">const</span> <span class="keywordtype">char</span> *, ... );
<a name="l00906"></a>00906 <span class="keyword">typedef</span> int (*bson_sprintf_func)( <span class="keywordtype">char</span> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *, ... );
<a name="l00907"></a>00907 
<a name="l00908"></a>00908 <span class="keyword">extern</span> <span class="keywordtype">void</span> *( *bson_malloc_func )( size_t );
<a name="l00909"></a>00909 <span class="keyword">extern</span> <span class="keywordtype">void</span> *( *bson_realloc_func )( <span class="keywordtype">void</span> *, size_t );
<a name="l00910"></a>00910 <span class="keyword">extern</span> void ( *bson_free )( <span class="keywordtype">void</span> * );
<a name="l00911"></a>00911 
<a name="l00912"></a>00912 <span class="keyword">extern</span> bson_printf_func bson_printf;
<a name="l00913"></a>00913 <span class="keyword">extern</span> bson_fprintf_func bson_fprintf;
<a name="l00914"></a>00914 <span class="keyword">extern</span> bson_sprintf_func bson_sprintf;
<a name="l00915"></a>00915 
<a name="l00916"></a>00916 <span class="keyword">extern</span> bson_printf_func bson_errprintf;
<a name="l00917"></a>00917 
<a name="l00927"></a>00927 <span class="keywordtype">void</span> *bson_malloc( <span class="keywordtype">int</span> size );
<a name="l00928"></a>00928 
<a name="l00940"></a>00940 <span class="keywordtype">void</span> *bson_realloc( <span class="keywordtype">void</span> *ptr, <span class="keywordtype">int</span> size );
<a name="l00941"></a>00941 
<a name="l00949"></a>00949 bson_err_handler set_bson_err_handler( bson_err_handler func );
<a name="l00950"></a>00950 
<a name="l00951"></a>00951 <span class="comment">/* does nothing if ok != 0 */</span>
<a name="l00957"></a>00957 <span class="keywordtype">void</span> bson_fatal( <span class="keywordtype">int</span> ok );
<a name="l00958"></a>00958 
<a name="l00965"></a>00965 <span class="keywordtype">void</span> bson_fatal_msg( <span class="keywordtype">int</span> ok, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg );
<a name="l00966"></a>00966 
<a name="l00972"></a>00972 <span class="keywordtype">void</span> bson_builder_error( <a class="code" href="structbson.html">bson</a> *b );
<a name="l00973"></a>00973 
<a name="l00974"></a>00974 MONGO_EXTERN_C_END
<a name="l00975"></a>00975 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Aug 3 2011 14:04:07 for MongoDBCDriver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
