<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>bson_context_t &#8212; libbson 1.5.0-dev</title>
    
    <link rel="stylesheet" href="_static/mongoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="bson_context_destroy()" href="bson_context_destroy.html" />
    <link rel="prev" title="bson_validate()" href="bson_validate.html" />
   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
  <div class="documentwrapper">
    <div class="bodywrapper" id="bson_context_t">
      <div class="body" role="main">
        
            <div class="related">
              <ul>
                <li class="nav-item nav-item-0"><a href="index.html">libbson 1.5.0-dev</a> &#187;</li>
                
                  <li class="nav-item nav-item-1"><a href="api.html">API Reference</a></li>
                
              </ul>
            </div>
          
        
  <div class="section" id="bson-context-t">
<h1>bson_context_t<a class="headerlink" href="#bson-context-t" title="Permalink to this headline">¶</a></h1>
<p>BSON OID Generation Context</p>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;bson.h&gt;</span><span class="cp"></span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
   <span class="n">BSON_CONTEXT_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
   <span class="n">BSON_CONTEXT_THREAD_SAFE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
   <span class="n">BSON_CONTEXT_DISABLE_HOST_CACHE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
   <span class="n">BSON_CONTEXT_DISABLE_PID_CACHE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
<span class="cp">#ifdef BSON_HAVE_SYSCALL_TID</span>
   <span class="n">BSON_CONTEXT_USE_TASK_ID</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">bson_context_flags_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_bson_context_t</span> <span class="n">bson_context_t</span><span class="p">;</span>

<span class="n">bson_context_t</span> <span class="o">*</span>
<span class="nf">bson_context_get_default</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">BSON_GNUC_CONST</span><span class="p">;</span>
<span class="n">bson_context_t</span> <span class="o">*</span>
<span class="nf">bson_context_new</span> <span class="p">(</span><span class="n">bson_context_flags_t</span> <span class="n">flags</span><span class="p">);</span>
<span class="kt">void</span>
<span class="nf">bson_context_destroy</span> <span class="p">(</span><span class="n">bson_context_t</span> <span class="o">*</span><span class="n">context</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <a class="symbol reference internal" href="#"><span class="doc">bson_context_t</span></a> structure is context for generation of BSON Object IDs. This context allows for specialized overriding of how ObjectIDs are generated based on the applications requirements. For example, disabling of PID caching can be configured if the application cannot detect when a call to <code class="docutils literal"><span class="pre">fork()</span></code> has occurred.</p>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="bson_context_destroy.html">bson_context_destroy()</a></li>
<li class="toctree-l1"><a class="reference internal" href="bson_context_get_default.html">bson_context_get_default()</a></li>
<li class="toctree-l1"><a class="reference internal" href="bson_context_new.html">bson_context_new()</a></li>
</ul>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;bson.h&gt;</span><span class="cp"></span>

<span class="kt">int</span>
<span class="nf">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
   <span class="n">bson_context_t</span> <span class="o">*</span><span class="n">ctx</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
   <span class="n">bson_oid_t</span> <span class="n">oid</span><span class="p">;</span>

   <span class="cm">/* use default context, via bson_context_get_default() */</span>
   <span class="n">bson_oid_init</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">oid</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

   <span class="cm">/* specify a local context for additional control */</span>
   <span class="n">ctx</span> <span class="o">=</span> <span class="n">bson_context_new</span> <span class="p">(</span><span class="n">BSON_CONTEXT_DISABLE_PID_CACHE</span> <span class="o">|</span>
                           <span class="n">BSON_CONTEXT_THREAD_SAFE</span><span class="p">);</span>
   <span class="n">bson_oid_init</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">oid</span><span class="p">,</span> <span class="n">ctx</span><span class="p">);</span>

   <span class="n">bson_context_destroy</span> <span class="p">(</span><span class="n">ctx</span><span class="p">);</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


      </div>
      <div class="footer">
        <div class="footer-nav">
          <a class="footer-nav-button footer-nav-button-prev" title="bson_validate()" href="bson_validate.html">&laquo; Previous: bson_validate()</a>
          <a class="footer-nav-button footer-nav-button-next" title="bson_context_destroy()" href="bson_context_destroy.html">Next: bson_context_destroy() &raquo;</a>
        </div>
      </div>
    </div>
  </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3><a href="index.html">libbson 1.5.0-dev</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing Libbson</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guides.html">Guides</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cross-platform-notes.html">Cross Platform Notes</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

<ul>
  <li class="toctree-l1 ">
    <a href="full_index.html">Index</a>
  </li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="colophon">
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1, based on <a href="https://sphinx-readable-theme.readthedocs.io/en/latest/">Sphinx Readable Theme</a>.
  </div>

  </body>
</html>