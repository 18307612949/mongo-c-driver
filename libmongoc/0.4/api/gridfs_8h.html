<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MongoDBCDriver: gridfs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>gridfs.h File Reference</h1>  </div>
</div>
<div class="contents">

<p>GridFS declarations.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="mongo_8h_source.html">mongo.h</a>&quot;</code><br/>

<p><a href="gridfs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgridfs.html">gridfs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgridfile.html">gridfile</a></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac839dfa1a1da3c3c50817b4d94717ff0"></a><!-- doxytag: member="gridfs.h::gridfs_offset" ref="ac839dfa1a1da3c3c50817b4d94717ff0" args="" -->
typedef uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>gridfs_offset</b></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <b>DEFAULT_CHUNK_SIZE</b> =  256 * 1024
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#ab8cdc1bba1b7cff5674cbe6db6c44add">gridfs_init</a> (<a class="el" href="structmongo.html">mongo</a> *client, const char *dbname, const char *prefix, <a class="el" href="structgridfs.html">gridfs</a> *gfs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a GridFS object.  <a href="#ab8cdc1bba1b7cff5674cbe6db6c44add"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#acf365e271a23efa6f7fee3d9a85c6d6a">gridfs_destroy</a> (<a class="el" href="structgridfs.html">gridfs</a> *gfs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys a GridFS object.  <a href="#acf365e271a23efa6f7fee3d9a85c6d6a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#ac4d6a459fc667b9f391b4f5b73c7b941">gridfile_writer_init</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, <a class="el" href="structgridfs.html">gridfs</a> *gfs, const char *remote_name, const char *content_type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a gridfile for writing incrementally with gridfs_write_buffer.  <a href="#ac4d6a459fc667b9f391b4f5b73c7b941"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a2515395f0c182e106a23c62a1946fda7">gridfile_write_buffer</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, const char *data, gridfs_offset length)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to a GridFS file incrementally.  <a href="#a2515395f0c182e106a23c62a1946fda7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#af51442d7fa6eefe9e269fc38fc6d3f66">gridfile_writer_done</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Signal that writing of this gridfile is complete by writing any buffered chunks along with the entry in the files collection.  <a href="#af51442d7fa6eefe9e269fc38fc6d3f66"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a3e57b69de9518ef5f351d9d593f1cd81">gridfs_store_buffer</a> (<a class="el" href="structgridfs.html">gridfs</a> *gfs, const char *data, gridfs_offset length, const char *remotename, const char *contenttype)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store a buffer as a GridFS file.  <a href="#a3e57b69de9518ef5f351d9d593f1cd81"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a2baa324f6b0a3bbfa50dd8fc59d314ca">gridfs_store_file</a> (<a class="el" href="structgridfs.html">gridfs</a> *gfs, const char *filename, const char *remotename, const char *contenttype)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open the file referenced by filename and store it as a GridFS file.  <a href="#a2baa324f6b0a3bbfa50dd8fc59d314ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a9a8f9bc05a11ae8a00184dc2821fbcc0">gridfs_remove_filename</a> (<a class="el" href="structgridfs.html">gridfs</a> *gfs, const char *filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes the files referenced by filename from the db.  <a href="#a9a8f9bc05a11ae8a00184dc2821fbcc0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a26cfceb43c395ad7f65c722cca887b8e">gridfs_find_query</a> (<a class="el" href="structgridfs.html">gridfs</a> *gfs, <a class="el" href="structbson.html">bson</a> *query, <a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the first file matching the provided query within the GridFS files collection, and return the file as a GridFile.  <a href="#a26cfceb43c395ad7f65c722cca887b8e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#ad6333346a462e2b93e05a8c0c2079a49">gridfs_find_filename</a> (<a class="el" href="structgridfs.html">gridfs</a> *gfs, const char *filename, <a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the first file referenced by filename within the GridFS and return it as a GridFile.  <a href="#ad6333346a462e2b93e05a8c0c2079a49"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a2bdef8c75e2587d369f28a443826c5fc">gridfile_init</a> (<a class="el" href="structgridfs.html">gridfs</a> *gfs, <a class="el" href="structbson.html">bson</a> *meta, <a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a GridFile containing the GridFS and file bson.  <a href="#a2bdef8c75e2587d369f28a443826c5fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a04c995d412dc176a4d9472b363e14e6d">gridfile_destroy</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys the GridFile.  <a href="#a04c995d412dc176a4d9472b363e14e6d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bson_bool_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a8e9c957d0fe54002561cb2e32ebff4a7">gridfile_exists</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns whether or not the GridFile exists.  <a href="#a8e9c957d0fe54002561cb2e32ebff4a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#ad1fb449a3b66702a8f85663184015a22">gridfile_get_filename</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the filename of GridFile.  <a href="#ad1fb449a3b66702a8f85663184015a22"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#ae221732bbc785947905fa25a26d61cee">gridfile_get_chunksize</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the size of the chunks of the GridFile.  <a href="#ae221732bbc785947905fa25a26d61cee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gridfs_offset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a0b229667c8d38e65665cf184f22683ee">gridfile_get_contentlength</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the length of GridFile's data.  <a href="#a0b229667c8d38e65665cf184f22683ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#ac9f7cd6e4e5b76f40d8c53a1b5bc12a8">gridfile_get_contenttype</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the MIME type of the GridFile.  <a href="#ac9f7cd6e4e5b76f40d8c53a1b5bc12a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bson_date_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a07cf400a73cd79ad49f2f2f708db46bf">gridfile_get_uploaddate</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the upload date of GridFile.  <a href="#a07cf400a73cd79ad49f2f2f708db46bf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a06019eee32100f58ca2e5cda39181e48">gridfile_get_md5</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the MD5 of GridFile.  <a href="#a06019eee32100f58ca2e5cda39181e48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a35d6084417040e7e5beed7d06d2f0c30">gridfile_get_field</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the field in GridFile specified by name.  <a href="#a35d6084417040e7e5beed7d06d2f0c30"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bson_bool_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#abb01c0c6e2ec67d926b73d059d652fa7">gridfile_get_boolean</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a boolean field in GridFile specified by name.  <a href="#abb01c0c6e2ec67d926b73d059d652fa7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbson.html">bson</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a94cf2b3a5b638acae9894e5e5e7a2599">gridfile_get_metadata</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the metadata of GridFile.  <a href="#a94cf2b3a5b638acae9894e5e5e7a2599"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#aa3da66222e7381c905f79932e4e50fee">gridfile_get_numchunks</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of chunks in the GridFile.  <a href="#aa3da66222e7381c905f79932e4e50fee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbson.html">bson</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a6374551ced5c69c4f412a56b4ebd2b31">gridfile_get_chunk</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, int n)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns chunk n of GridFile.  <a href="#a6374551ced5c69c4f412a56b4ebd2b31"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmongo__cursor.html">mongo_cursor</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a5577d05b66c95bf3000c7abdb595ed11">gridfile_get_chunks</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, int start, int size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a <a class="el" href="structmongo__cursor.html">mongo_cursor</a> of *size* chunks starting with chunk *start*.  <a href="#a5577d05b66c95bf3000c7abdb595ed11"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gridfs_offset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a452437e0ee6ae3649bb0240f6d715140">gridfile_write_file</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, FILE *stream)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes the GridFile to a stream.  <a href="#a452437e0ee6ae3649bb0240f6d715140"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gridfs_offset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a0028906317577a0d7ef8fa4437469158">gridfile_read</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, gridfs_offset size, char *buf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads length bytes from the GridFile to a buffer and updates the position in the file.  <a href="#a0028906317577a0d7ef8fa4437469158"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">gridfs_offset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#a2522fa4fa375d73a355da0c95d5d8700">gridfile_seek</a> (<a class="el" href="structgridfile.html">gridfile</a> *gfile, gridfs_offset offset)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the position in the file (If the offset goes beyond the contentlength, the position is updated to the end of the file.  <a href="#a2522fa4fa375d73a355da0c95d5d8700"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>GridFS declarations. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a04c995d412dc176a4d9472b363e14e6d"></a><!-- doxytag: member="gridfs.h::gridfile_destroy" ref="a04c995d412dc176a4d9472b363e14e6d" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfile_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroys the GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>oGridFIle</em>&nbsp;</td><td>- the GridFile being destroyed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8e9c957d0fe54002561cb2e32ebff4a7"></a><!-- doxytag: member="gridfs.h::gridfile_exists" ref="a8e9c957d0fe54002561cb2e32ebff4a7" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson_bool_t gridfile_exists </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns whether or not the GridFile exists. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the GridFile being examined </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abb01c0c6e2ec67d926b73d059d652fa7"></a><!-- doxytag: member="gridfs.h::gridfile_get_boolean" ref="abb01c0c6e2ec67d926b73d059d652fa7" args="(gridfile *gfile, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson_bool_t gridfile_get_boolean </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a boolean field in GridFile specified by name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>- the name of the field to be returned</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the boolean of the field specified (NULL if none exists) </dd></dl>

</div>
</div>
<a class="anchor" id="a6374551ced5c69c4f412a56b4ebd2b31"></a><!-- doxytag: member="gridfs.h::gridfile_get_chunk" ref="a6374551ced5c69c4f412a56b4ebd2b31" args="(gridfile *gfile, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbson.html">bson</a> gridfile_get_chunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns chunk n of GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the nth chunk of the Gridfile </dd></dl>

</div>
</div>
<a class="anchor" id="a5577d05b66c95bf3000c7abdb595ed11"></a><!-- doxytag: member="gridfs.h::gridfile_get_chunks" ref="a5577d05b66c95bf3000c7abdb595ed11" args="(gridfile *gfile, int start, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmongo__cursor.html">mongo_cursor</a>* gridfile_get_chunks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a <a class="el" href="structmongo__cursor.html">mongo_cursor</a> of *size* chunks starting with chunk *start*. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>- the first chunk in the cursor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>- the number of chunks to be returned</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- <a class="el" href="structmongo__cursor.html">mongo_cursor</a> of the chunks (must be destroyed after use) </dd></dl>

</div>
</div>
<a class="anchor" id="ae221732bbc785947905fa25a26d61cee"></a><!-- doxytag: member="gridfs.h::gridfile_get_chunksize" ref="ae221732bbc785947905fa25a26d61cee" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfile_get_chunksize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the size of the chunks of the GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the size of the chunks of the Gridfile </dd></dl>

</div>
</div>
<a class="anchor" id="a0b229667c8d38e65665cf184f22683ee"></a><!-- doxytag: member="gridfs.h::gridfile_get_contentlength" ref="a0b229667c8d38e65665cf184f22683ee" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gridfs_offset gridfile_get_contentlength </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the length of GridFile's data. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the length of the Gridfile's data </dd></dl>

</div>
</div>
<a class="anchor" id="ac9f7cd6e4e5b76f40d8c53a1b5bc12a8"></a><!-- doxytag: member="gridfs.h::gridfile_get_contenttype" ref="ac9f7cd6e4e5b76f40d8c53a1b5bc12a8" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gridfile_get_contenttype </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the MIME type of the GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the MIME type of the Gridfile (NULL if no type specified) </dd></dl>

</div>
</div>
<a class="anchor" id="a35d6084417040e7e5beed7d06d2f0c30"></a><!-- doxytag: member="gridfs.h::gridfile_get_field" ref="a35d6084417040e7e5beed7d06d2f0c30" args="(gridfile *gfile, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gridfile_get_field </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the field in GridFile specified by name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>- the name of the field to be returned</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the data of the field specified (NULL if none exists) </dd></dl>

</div>
</div>
<a class="anchor" id="ad1fb449a3b66702a8f85663184015a22"></a><!-- doxytag: member="gridfs.h::gridfile_get_filename" ref="ad1fb449a3b66702a8f85663184015a22" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gridfile_get_filename </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the filename of GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the filename of the Gridfile </dd></dl>

</div>
</div>
<a class="anchor" id="a06019eee32100f58ca2e5cda39181e48"></a><!-- doxytag: member="gridfs.h::gridfile_get_md5" ref="a06019eee32100f58ca2e5cda39181e48" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gridfile_get_md5 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the MD5 of GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the MD5 of the Gridfile </dd></dl>

</div>
</div>
<a class="anchor" id="a94cf2b3a5b638acae9894e5e5e7a2599"></a><!-- doxytag: member="gridfs.h::gridfile_get_metadata" ref="a94cf2b3a5b638acae9894e5e5e7a2599" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbson.html">bson</a> gridfile_get_metadata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the metadata of GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the metadata of the Gridfile in a bson object (an empty bson is returned if none exists) </dd></dl>

</div>
</div>
<a class="anchor" id="aa3da66222e7381c905f79932e4e50fee"></a><!-- doxytag: member="gridfs.h::gridfile_get_numchunks" ref="aa3da66222e7381c905f79932e4e50fee" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfile_get_numchunks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of chunks in the GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the number of chunks in the Gridfile </dd></dl>

</div>
</div>
<a class="anchor" id="a07cf400a73cd79ad49f2f2f708db46bf"></a><!-- doxytag: member="gridfs.h::gridfile_get_uploaddate" ref="a07cf400a73cd79ad49f2f2f708db46bf" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson_date_t gridfile_get_uploaddate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the upload date of GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the upload date of the Gridfile </dd></dl>

</div>
</div>
<a class="anchor" id="a2bdef8c75e2587d369f28a443826c5fc"></a><!-- doxytag: member="gridfs.h::gridfile_init" ref="a2bdef8c75e2587d369f28a443826c5fc" args="(gridfs *gfs, bson *meta, gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfile_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbson.html">bson</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a GridFile containing the GridFS and file bson. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the GridFS where the GridFile is located </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>meta</em>&nbsp;</td><td>- the file object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the output GridFile that is being initialized</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- MONGO_OK or MONGO_ERROR. </dd></dl>

</div>
</div>
<a class="anchor" id="a0028906317577a0d7ef8fa4437469158"></a><!-- doxytag: member="gridfs.h::gridfile_read" ref="a0028906317577a0d7ef8fa4437469158" args="(gridfile *gfile, gridfs_offset size, char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gridfs_offset gridfile_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs_offset&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads length bytes from the GridFile to a buffer and updates the position in the file. </p>
<p>(assumes the buffer is large enough) (if size is greater than EOF gridfile_read reads until EOF)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>- the amount of bytes to be read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>- the buffer to read to</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- the number of bytes read </dd></dl>

</div>
</div>
<a class="anchor" id="a2522fa4fa375d73a355da0c95d5d8700"></a><!-- doxytag: member="gridfs.h::gridfile_seek" ref="a2522fa4fa375d73a355da0c95d5d8700" args="(gridfile *gfile, gridfs_offset offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gridfs_offset gridfile_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs_offset&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the position in the file (If the offset goes beyond the contentlength, the position is updated to the end of the file. </p>
<p>)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>- the position to update to</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- resulting offset location </dd></dl>

</div>
</div>
<a class="anchor" id="a2515395f0c182e106a23c62a1946fda7"></a><!-- doxytag: member="gridfs.h::gridfile_write_buffer" ref="a2515395f0c182e106a23c62a1946fda7" args="(gridfile *gfile, const char *data, gridfs_offset length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfile_write_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs_offset&nbsp;</td>
          <td class="paramname"> <em>length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write to a GridFS file incrementally. </p>
<p>You can call this function any number of times with a new buffer each time. This allows you to effectively stream to a GridFS file. When finished, be sure to call gridfs_writer_done. </p>

</div>
</div>
<a class="anchor" id="a452437e0ee6ae3649bb0240f6d715140"></a><!-- doxytag: member="gridfs.h::gridfile_write_file" ref="a452437e0ee6ae3649bb0240f6d715140" args="(gridfile *gfile, FILE *stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gridfs_offset gridfile_write_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>stream</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes the GridFile to a stream. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stream</em>&nbsp;</td><td>- the file stream to write to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af51442d7fa6eefe9e269fc38fc6d3f66"></a><!-- doxytag: member="gridfs.h::gridfile_writer_done" ref="af51442d7fa6eefe9e269fc38fc6d3f66" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfile_writer_done </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Signal that writing of this gridfile is complete by writing any buffered chunks along with the entry in the files collection. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- MONGO_OK or MONGO_ERROR. </dd></dl>

</div>
</div>
<a class="anchor" id="ac4d6a459fc667b9f391b4f5b73c7b941"></a><!-- doxytag: member="gridfs.h::gridfile_writer_init" ref="ac4d6a459fc667b9f391b4f5b73c7b941" args="(gridfile *gfile, gridfs *gfs, const char *remote_name, const char *content_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfile_writer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>remote_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>content_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a gridfile for writing incrementally with gridfs_write_buffer. </p>
<p>Once initialized, you can write any number of buffers with gridfs_write_buffer. When done, you must call gridfs_writer_done to save the file metadata. </p>

</div>
</div>
<a class="anchor" id="acf365e271a23efa6f7fee3d9a85c6d6a"></a><!-- doxytag: member="gridfs.h::gridfs_destroy" ref="acf365e271a23efa6f7fee3d9a85c6d6a" args="(gridfs *gfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfs_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroys a GridFS object. </p>
<p>Call this when finished with the object..</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>a grid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad6333346a462e2b93e05a8c0c2079a49"></a><!-- doxytag: member="gridfs.h::gridfs_find_filename" ref="ad6333346a462e2b93e05a8c0c2079a49" args="(gridfs *gfs, const char *filename, gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfs_find_filename </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the first file referenced by filename within the GridFS and return it as a GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>- filename of the file to find </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the output GridFile to be intialized</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>MONGO_OK or MONGO_ERROR. </dd></dl>

</div>
</div>
<a class="anchor" id="a26cfceb43c395ad7f65c722cca887b8e"></a><!-- doxytag: member="gridfs.h::gridfs_find_query" ref="a26cfceb43c395ad7f65c722cca887b8e" args="(gridfs *gfs, bson *query, gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfs_find_query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbson.html">bson</a> *&nbsp;</td>
          <td class="paramname"> <em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgridfile.html">gridfile</a> *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the first file matching the provided query within the GridFS files collection, and return the file as a GridFile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query</em>&nbsp;</td><td>- a pointer to the bson with the query data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the output GridFile to be initialized</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>MONGO_OK if successful, MONGO_ERROR otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ab8cdc1bba1b7cff5674cbe6db6c44add"></a><!-- doxytag: member="gridfs.h::gridfs_init" ref="ab8cdc1bba1b7cff5674cbe6db6c44add" args="(mongo *client, const char *dbname, const char *prefix, gridfs *gfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfs_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmongo.html">mongo</a> *&nbsp;</td>
          <td class="paramname"> <em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a GridFS object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>client</em>&nbsp;</td><td>- db connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dbname</em>&nbsp;</td><td>- database name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prefix</em>&nbsp;</td><td>- collection prefix, default is fs if NULL or empty </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the GridFS object to initialize</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- MONGO_OK or MONGO_ERROR. </dd></dl>

</div>
</div>
<a class="anchor" id="a9a8f9bc05a11ae8a00184dc2821fbcc0"></a><!-- doxytag: member="gridfs.h::gridfs_remove_filename" ref="a9a8f9bc05a11ae8a00184dc2821fbcc0" args="(gridfs *gfs, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfs_remove_filename </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the files referenced by filename from the db. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>- the filename of the file/s to be removed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3e57b69de9518ef5f351d9d593f1cd81"></a><!-- doxytag: member="gridfs.h::gridfs_store_buffer" ref="a3e57b69de9518ef5f351d9d593f1cd81" args="(gridfs *gfs, const char *data, gridfs_offset length, const char *remotename, const char *contenttype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfs_store_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs_offset&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>remotename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>contenttype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Store a buffer as a GridFS file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>- pointer to buffer to store in GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>- length of the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remotename</em>&nbsp;</td><td>- filename for use in the database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>contenttype</em>&nbsp;</td><td>- optional MIME type for this object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- MONGO_OK or MONGO_ERROR. </dd></dl>

</div>
</div>
<a class="anchor" id="a2baa324f6b0a3bbfa50dd8fc59d314ca"></a><!-- doxytag: member="gridfs.h::gridfs_store_file" ref="a2baa324f6b0a3bbfa50dd8fc59d314ca" args="(gridfs *gfs, const char *filename, const char *remotename, const char *contenttype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfs_store_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgridfs.html">gridfs</a> *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>remotename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>contenttype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open the file referenced by filename and store it as a GridFS file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>- local filename relative to the process </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remotename</em>&nbsp;</td><td>- optional filename for use in the database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>contenttype</em>&nbsp;</td><td>- optional MIME type for this object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- MONGO_OK or MONGO_ERROR. </dd></dl>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Aug 3 2011 14:04:07 for MongoDBCDriver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
